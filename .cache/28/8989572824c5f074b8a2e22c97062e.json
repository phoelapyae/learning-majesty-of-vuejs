{"id":"movies.html","dependencies":[{"name":"/home/zinmyomaung/web_projects/the-majesty-of-vuejs/package.json","includedInParent":true,"mtime":1625219529301}],"generated":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Movies</title>\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <div id=\"app\" class=\"container p-5\">\n        <table class=\"table table-stripted\">\n            <tr>\n                <td>#</td>\n                <td>Title</td>\n                <td>Director</td>\n                <td>Action</td>\n            </tr>\n            <tr is=\"movie\" v-for=\"movie in movies\" :movie=\"movie\">\n\n            </tr>\n        </table>\n        <div class=\"row\">\n            <button class=\"btn btn-primary\" @click=\"createMovie()\"> \n                Add new movie\n            </button>\n        </div>\n        <!-- <pre>\n            {{ $data }}\n        </pre> -->\n    </div>\n</body>\n\n<template id=\"template-movie\">\n    <tr>\n        <td>\n            {{ movie.id }}\n        </td>\n        <td>\n            <input v-if=\"movie.editing\" v-model=\"movie.title\" type=\"text\" class=\"form-control\">\n            <span v-else=\"\">\n                {{ movie.title }}\n            </span>\n        </td>\n        <td>\n            <input v-if=\"movie.editing\" v-model=\"movie.director\" type=\"text\" class=\"form-control\">\n            <span v-else=\"\">\n                {{ movie.director }}\n            </span>\n        </td>\n        <td>\n            <div v-if=\"!movie.editing\" class=\"btn-group\">\n                <button class=\"btn btn-primary\" @click=\"editMovie(movie)\">\n                    Edit \n                </button>\n                <button class=\"btn btn-danger\" @click=\"deleteMovie(movie)\">\n                    Delete\n                </button>\n            </div>\n\n            <div v-else=\"\" class=\"btn-group\">\n                <button v-if=\"movie.id\" class=\"btn btn-primary\" @click=\"updateMovie(movie)\">\n                    Update\n                </button>\n                <button v-else=\"\" class=\"btn btn-success\" @click=\"storeMovie(movie)\">\n                    Save\n                </button>\n                <button class=\"btn btn-default\" @click=\"movie.editing = false\">\n                    Cancel\n                </button>\n            </div>\n            \n        </td>\n    </tr>\n    \n</template>\n\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.js\"></script>\n<script src=\"https://unpkg.com/axios/dist/axios.min.js\"></script>\n<script>Vue.component('movie', {\n  template: '#template-movie',\n  props: ['movie'],\n  methods: {\n    editMovie: function (movie) {\n      movie.editing = true;\n    },\n    updateMovie: function (movie) {\n      axios.patch('http://localhost:8000/api/movies/' + movie.id, movie).then(function () {\n        movie.editing = false;\n      });\n    },\n    deleteMovie: function (movie) {\n      let index = this.$parent.movies.indexOf(movie);\n      this.$parent.movies.splice(index, 1);\n      axios.delete('http://localhost:8000/api/movies/' + movie.id);\n    },\n    storeMovie: function (movie) {\n      axios.post('http://localhost:8000/api/movies', movie).then(function (movie) {\n        vm.fetchMovies();\n        movie.editing = false;\n      });\n    }\n  }\n});\nvar vm = new Vue({\n  el: '#app',\n  data: {\n    movies: []\n  },\n  mounted: function () {\n    this.fetchMovies();\n  },\n  methods: {\n    fetchMovies: function () {\n      axios.get('http://localhost:8000/api/movies').then(function (response) {\n        var moviesReady = response.data.map(function (movie) {\n          movie.editing = false;\n          return movie;\n        });\n        vm.movies = moviesReady;\n      });\n    },\n    createMovie: function () {\n      var newMovie = {\n        \"title\": \"\",\n        \"director\": \"\",\n        \"editing\": true\n      };\n      this.movies.push(newMovie);\n    }\n  }\n});</script>\n</html>"},"sourceMaps":null,"error":null,"hash":"bd5c90cfc598ca45365b7a6b7949e459","cacheData":{"env":{}}}