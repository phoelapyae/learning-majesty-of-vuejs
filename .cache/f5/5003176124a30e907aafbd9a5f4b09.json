{"id":"index.html","dependencies":[{"name":"/home/zinmyomaung/web_projects/the-majesty-of-vuejs/package.json","includedInParent":true,"mtime":1606337893000}],"generated":{"html":"<html>\n<head>\n    <title>Hello Vue</title>\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n</head>\n<body>\n<div id=\"app\" class=\"container\">\n   <table class=\"table table-striped\">\n       <tr>\n           <th>#</th>\n           <th>Plot</th>\n           <th>Writers</th>\n           <th>Upvotes</th>\n           <th>Actions</th>\n       </tr>\n       <tr v-for=\"story in stories\" is=\"story\" :story=\"story\"></tr>\n   </table>\n\n   <p class=\"lead\">\n       Here's a list of all your stories.\n       <button @click=\"createStory\" class=\"btn btn-primary\">\n        Add new one\n        </button>\n    </p>\n    <!-- <pre>\n        {{ $data }}\n    </pre> -->\n</div>\n\n<template id=\"template-story-raw\">\n    <tr>\n        <td>\n            {{ story.id }}\n        </td>\n        <td>\n            <input v-if=\"story.editing\" v-model=\"story.plot\" class=\"form-control\">\n            <span v-else=\"\">{{ story.plot }}</span>\n        </td>\n        <td>\n            <input v-if=\"story.editing\" v-model=\"story.writer\" class=\"form-control\">\n            <span v-else=\"\">{{ story.writer }}</span>\n        </td>\n        <td>\n            {{ story.upvotes }}\n        </td>\n        <td>\n            <div v-if=\"!story.editing\" class=\"btn-group\">\n                <button @click=\"upvoteStory(story)\" class=\"btn btn-primary\">\n                    Upvote \n                </button>\n                <button @click=\"editStory(story)\" class=\"btn btn-default\">\n                    Edit\n                </button>\n                <button @click=\"deleteStory(story)\" class=\"btn btn-danger\">\n                    Delete\n                </button>\n            </div>\n            <div v-else=\"\" class=\"btn-group\">\n                <button v-if=\"story.id\" @click=\"updateStory(story)\" class=\"btn btn-primary\">\n                    Update Story \n                </button>\n                <button v-else=\"\" @click=\"storeStory(story)\" class=\"btn btn-success\">\n                    Save Story \n                </button>\n                <button @click=\"story.editing = false\" class=\"btn btn-default\">\n                    Cancel\n                </button>\n            </div>\n        </td>\n    </tr>\n</template>\n\n\n\n</body>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.js\"></script>\n<script src=\"https://unpkg.com/axios/dist/axios.min.js\"></script>\n<script>Vue.component('story', {\n  template: '#template-story-raw',\n  props: ['story'],\n  methods: {\n    upvoteStory: function (story) {\n      story.upvotes++;\n      axios.patch('http://localhost:8000/api/stories/' + story.id, story);\n    },\n    deleteStory: function (story) {\n      var index = this.$parent.stories.indexOf(story);\n      this.$parent.stories.splice(index, 1); // make DELETE request\n\n      axios.delete('http://localhost:8000/api/stories/' + story.id);\n    },\n    editStory: function (story) {\n      story.editing = true;\n    },\n    updateStory: function (story) {\n      axios.patch('http://localhost:8000/api/stories/' + story.id, story).then(function () {\n        story.editing = false;\n      });\n    },\n    storeStory: function (story) {\n      axios.post('http://localhost:8000/api/stories/', story).then(function (response) {\n        Vue.set(story, 'id', response.data.id);\n        story.editing = false; // vm.fetchStories()\n      });\n    }\n  }\n});\nvar vm = new Vue({\n  el: '#app',\n  data: {\n    stories: []\n  },\n  mounted: function () {\n    this.fetchStories();\n  },\n  methods: {\n    createStory: function () {\n      var newStory = {\n        \"plot\": \"\",\n        \"upvotes\": 0,\n        \"editing\": true\n      };\n      this.stories.push(newStory);\n    },\n    fetchStories: function () {\n      // var vm = this \n      axios.get('http://localhost:8000/api/stories').then(function (response) {\n        var storiesReady = response.data.map(function (story) {\n          story.editing = false;\n          return story;\n        }); // vm.stories = storiesReady\n\n        Vue.set(vm, 'stories', storiesReady);\n      });\n    }\n  }\n});</script>\n</html>"},"sourceMaps":null,"error":null,"hash":"f41a2ef9e08913bbac2d6821eac61d4e","cacheData":{"env":{}}}